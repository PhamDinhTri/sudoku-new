window.__require=function e(t,n,o){function i(s,r){if(!n[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var c="function"==typeof __require&&__require;if(!r&&c)return c(a,!0);if(l)return l(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var l="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({Board:[function(e,t){"use strict";cc._RF.push(t,"001benjhmRBQ6DWi6gud9bL","Board");var n=e("./Core/Sudoku"),o=e("./Core/Utils"),i=e("./Box");cc.Class({extends:cc.Component,properties:{boxes:{type:[i.Box],default:[]},panelResume:{type:cc.Layout,default:null},btnResume:{type:cc.Button,default:null},imageMark:{type:cc.Sprite,default:null},labelHint:{type:cc.Label,default:null},_sudoku:null,_lastSelected:null,_highlightCellIndexes:[],_steps:[],_isMarked:!1},onLoad:function(){this._initBoard(),globalEvent.on("CELL_SELECTED",this._onCellSelected,this),globalEvent.on("NUMBER_CLICKED",this._onNumberClicked,this),globalEvent.on("UNDO",this._onUndo,this),globalEvent.on("ERASE",this._onErase,this),globalEvent.on("MARK",this._onGameMark,this),globalEvent.on("HINT",this._onHint,this),globalEvent.on("NEW_GAME_DIFF",this._onNewGameByDiff,this),globalEvent.on("GAME_PAUSE",this._onGamePause,this),globalEvent.on("GAME_RESUME",this._onGameResume,this)},start:function(){},onDestroy:function(){globalEvent.off("CELL_SELECTED",this._onCellSelected,this),globalEvent.off("NUMBER_CLICKED",this._onNumberClicked,this),globalEvent.off("UNDO",this._onUndo,this),globalEvent.off("ERASE",this._onErase,this),globalEvent.off("MARK",this._onGameMark,this),globalEvent.off("HINT",this._onHint,this),globalEvent.off("NEW_GAME_DIFF",this._onNewGameByDiff,this),globalEvent.off("GAME_PAUSE",this._onGamePause,this),globalEvent.off("GAME_RESUME",this._onGameResume,this)},_initBoard:function(e){var t=this;void 0===e&&(e="easy"),this._sudoku=new n.Sudoku,this._sudoku.make(e),this._sudoku.puzzleMatrix.forEach(function(e,n){e.forEach(function(e,l){var s=o.Utils.box.convertToBoxIndex(n,l),r=s.boxIndex,a=s.cellIndex,c=t.boxes[r].getComponent(i.Box).getCell(a);c.setIndex(r,a),c.labelNum.string=e||"",c.labelNum.node.color=e?new cc.Color(0,0,0):new cc.Color(3,80,165),c.getComponent(cc.Button).interactable=0===e})}),this._steps=[],this._unhighlightCells(),this._lastSelected=null,this._highlightCellIndexes=[],this._isMarked=!1,this._setImageMark(),this.panelResume.node.active=!1,this.labelHint.string=this._sudoku.hintNum,globalEvent.emit("GAME_START")},_onCellSelected:function(e){this._unhighlightCells(),this._lastSelected=e,this._highlightCells()},_fillNumber:function(e){var t=this.boxes[this._lastSelected.boxIndex].getComponent(i.Box).getCell(this._lastSelected.cellIndex);t.clearMarks(),t.labelNum.string=e;var n=o.Utils.box.convertFromBoxIndex(this._lastSelected.boxIndex,this._lastSelected.cellIndex),l=n.rowIndex,s=n.colIndex;this._steps.push([this._lastSelected,this._sudoku.puzzleMatrix[l][s]]),this._sudoku.puzzleMatrix[l][s]=e;var r=this._sudoku.check(this._lastSelected.boxIndex,this._lastSelected.cellIndex),a=r.correct,c=r.finish;t.labelNum.node.color=a?new cc.Color(3,80,165):new cc.Color(241,26,26),c&&globalEvent.emit("GAME_FINISH")},_fillMark:function(e){var t=this.boxes[this._lastSelected.boxIndex].getComponent(i.Box).getCell(this._lastSelected.cellIndex);t.labelNum.string="",t.labelMarks[e-1].node.active=!t.labelMarks[e-1].node.active;var n=o.Utils.box.convertFromBoxIndex(this._lastSelected.boxIndex,this._lastSelected.cellIndex),l=n.rowIndex,s=n.colIndex;this._sudoku.puzzleMatrix[l][s]=0},_onNumberClicked:function(e){if(this._lastSelected){var t=parseInt(e.number);this._isMarked?this._fillMark(t):this._fillNumber(t)}},_onUndo:function(){if(!this._isMarked&&0!=this._steps.length){var e=this._steps.pop(),t=e[0],n=t.boxIndex,l=t.cellIndex,s=e[1],r=o.Utils.box.convertFromBoxIndex(n,l),a=r.rowIndex,c=r.colIndex;this._sudoku.puzzleMatrix[a][c]=parseInt(s);var u=this.boxes[n].getComponent(i.Box).getCell(l);u.labelNum.string=s||"";var h=this._sudoku.check(n,l),d=h.correct;h.finish,u.labelNum.node.color=d?new cc.Color(3,80,165):new cc.Color(241,26,26)}},_onErase:function(){if(!this._isMarked&&this._lastSelected){this.boxes[this._lastSelected.boxIndex].getComponent(i.Box).getCell(this._lastSelected.cellIndex).labelNum.string="";var e=o.Utils.box.convertFromBoxIndex(this._lastSelected.boxIndex,this._lastSelected.cellIndex),t=e.rowIndex,n=e.colIndex;this._steps.push([this._lastSelected,this._sudoku.puzzleMatrix[t][n]]),this._sudoku.puzzleMatrix[t][n]=0}},_onNewGameByDiff:function(e){this._initBoard(e)},_unhighlightCells:function(){var e=this;this._lastSelected&&(this._highlightCellIndexes.forEach(function(t){var n=t[0],o=t[1];e.boxes[n].getComponent(i.Box).getCell(o).node.color=new cc.Color(255,255,255)}),this._highlightCellIndexes=[])},_highlightCells:function(){if(this._lastSelected){for(var e=o.Utils.box.convertFromBoxIndex(this._lastSelected.boxIndex,this._lastSelected.cellIndex),t=e.rowIndex,n=e.colIndex,l=0;l<9;l++){var s=void 0,r=void 0,a=o.Utils.box.convertToBoxIndex(t,l);s=a.boxIndex,r=a.cellIndex;var c=this.boxes[s].getComponent(i.Box).getCell(r);c.node.color=new cc.Color(192,192,192),this._highlightCellIndexes.push([s,r]);var u=o.Utils.box.convertToBoxIndex(l,n);s=u.boxIndex,r=u.cellIndex,(c=this.boxes[s].getComponent(i.Box).getCell(r)).node.color=new cc.Color(192,192,192),this._highlightCellIndexes.push([s,r]),(c=this.boxes[this._lastSelected.boxIndex].getComponent(i.Box).getCell(l)).node.color=new cc.Color(192,192,192),this._highlightCellIndexes.push([this._lastSelected.boxIndex,l])}this.boxes[this._lastSelected.boxIndex].getComponent(i.Box).getCell(this._lastSelected.cellIndex).node.color=new cc.Color(160,160,160)}},_onGamePause:function(){this.panelResume.node.active=!0},_onGameResume:function(){this.panelResume.node.active=!1},_onGameMark:function(){this._isMarked=!this._isMarked,this._setImageMark()},_setImageMark:function(){this._isMarked?this.imageMark.spriteFrame=new cc.SpriteFrame(cc.resources.load("resources/On.png")):this.imageMark.spriteFrame=new cc.SpriteFrame(cc.resources.load("resources/Off.png"))},_onHint:function(){if(0!=this._sudoku.hintNum&&this._lastSelected){this._sudoku.hintNum-=1,this.labelHint.string=this._sudoku.hintNum;var e=o.Utils.box.convertFromBoxIndex(this._lastSelected.boxIndex,this._lastSelected.cellIndex),t=e.rowIndex,n=e.colIndex;this._fillNumber(this._sudoku.matrix[t][n])}}}),cc._RF.pop()},{"./Box":"Box","./Core/Sudoku":"Sudoku","./Core/Utils":"Utils"}],Box:[function(e,t,n){"use strict";cc._RF.push(t,"717a8MRi4dFMKZB8ZtI3kK5","Box"),n.__esModule=!0,n.Box=void 0;var o=e("./Cell"),i=cc.Class({extends:cc.Component,properties:{cells:{type:[o.Cell],default:[]}},onLoad:function(){},start:function(){},getCell:function(e){return this.cells[e].getComponent(o.Cell)}});n.Box=i,cc._RF.pop()},{"./Cell":"Cell"}],Cell:[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"940ec8I1QBO9ID107JA31il","Cell"),n.__esModule=!0,n.Cell=void 0;var s=cc.Class({extends:cc.Component,properties:{labelNum:{type:cc.Label,default:null},labelMarks:{type:[cc.Label],default:[]},_boxIndex:null,_cellIndex:null},onLoad:function(){this.clearMarks();var e=new cc.Component.EventHandler;e.target=this.node,e.component="Cell",e.handler="onClickCell",e.customEventData={boxIndex:this._boxIndex,cellIndex:this._cellIndex},this.node.getComponent(cc.Button).clickEvents.push(e);var t=this.node.getComponent(cc.Graphics);t&&(t.rect(-35,-35,this.node.width,this.node.height),t.stroke())},start:function(){},onClickCell:function(e,t){this._boxIndex,this._cellIndex,globalEvent.emit("CELL_SELECTED",t)},setIndex:function(e,t){this._boxIndex=e,this._cellIndex=t},clearMarks:function(){for(var e,t=o(this.labelMarks);!(e=t()).done;)e.value.node.active=!1}});n.Cell=s,cc._RF.pop()},{}],Diffculty:[function(e,t){"use strict";cc._RF.push(t,"4d59dkx7HlFFqMJEVB7CM/3","Diffculty"),cc.Class({extends:cc.Component,properties:{panel:{type:cc.Layout,default:null},mask:{type:cc.Layout,default:null}},onLoad:function(){this.panel.node.y=-1280,this.mask.node.active=!1,globalEvent.on("NEW",this.onShow,this),globalEvent.on("CANCEL",this.onHide,this),globalEvent.on("NEW_GAME_DIFF",this.onHide,this),globalEvent.on("GAME_FINISH",this.onGameFinish,this)},onDestroy:function(){globalEvent.off("NEW",this.onShow,this),globalEvent.off("CANCEL",this.onHide,this),globalEvent.off("NEW_GAME_DIFF",this.onHide,this),globalEvent.on("GAME_FINISH",this.onGameFinish,this)},start:function(){},onShow:function(){this.mask.node.active=!0;var e=cc.moveTo(.1,cc.v2(0,0));this.panel.node.runAction(e)},onHide:function(){this.panel.node.getChildByName("ButtonCancel").active=!0,this.mask.node.active=!1;var e=cc.moveTo(.1,cc.v2(0,-1280));this.panel.node.runAction(e)},onGameFinish:function(){this.panel.node.getChildByName("ButtonCancel").active=!1}}),cc._RF.pop()},{}],Function:[function(e,t){"use strict";cc._RF.push(t,"ccaefPWRvZKirLj1rcqf9N+","Function"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onClickUndo:function(){globalEvent.emit("UNDO")},onClickErase:function(){globalEvent.emit("ERASE")},onClickMark:function(){globalEvent.emit("MARK")},onClickHint:function(){globalEvent.emit("HINT")},onClickNew:function(){globalEvent.emit("NEW")},onClickCancel:function(){globalEvent.emit("CANCEL")},onClickNewGameByDiff:function(e,t){globalEvent.emit("NEW_GAME_DIFF",t)},onClickPause:function(){globalEvent.emit("GAME_PAUSE")},onClickResume:function(){globalEvent.emit("GAME_RESUME")}}),cc._RF.pop()},{}],Game:[function(e,t){"use strict";cc._RF.push(t,"2b688q7w+ROMpaWuRfflGOZ","Game"),cc.Class({extends:cc.Component,properties:{usedTime:{type:cc.Label,default:null},_usedTime:0,_isPaused:!1},onLoad:function(){window.globalEvent=new cc.EventTarget,globalEvent.on("GAME_START",this._onGameStart,this),globalEvent.on("GAME_PAUSE",this._onGamePause,this),globalEvent.on("GAME_RESUME",this._onGameResume,this)},update:function(e){this._isPaused||(this._usedTime+=e,this.usedTime.string=this._formatTimeString())},onDestroy:function(){globalEvent.off("GAME_START",this._onGameStart,this),globalEvent.off("GAME_PAUSE",this._onGamePause,this),globalEvent.off("GAME_RESUME",this._onGameResume,this)},_onGameStart:function(){this._usedTime=0},_onGamePause:function(){this._isPaused=!0},_onGameResume:function(){this._isPaused=!1},_formatTimeString:function(){var e=Math.ceil(this._usedTime),t=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60);return t<10&&(t="0"+t),n<10&&(n="0"+n),(e%=60)<10&&(e="0"+e),t+":"+n+":"+e}}),cc._RF.pop()},{}],Generator:[function(e,t,n){"use strict";cc._RF.push(t,"c3aa6DXLUVHQ65llnp8fsVa","Generator"),n.__esModule=!0,n.Generator=void 0;var o=e("./Utils"),i=function(){function e(){this._retry_time=0}var t=e.prototype;return t.generate=function(){for(;!this.internalGenerate();)this._retry_time+=1;return console.log("retry generate "+this._retry_time+" times"),this._retry_time=0,this.matrix},t.internalGenerate=function(){var e=this;return this.matrix=o.Utils.matrix.make(),this.orders=o.Utils.matrix.make().map(function(e){return e.map(function(e,t){return t})}).map(function(e){return o.Utils.matrix.shuffle(e)}),o.Utils.matrix.makeRow().every(function(t,n){return e.fillNumber(n+1)})},t.fillNumber=function(e){return this.fillRow(e,0)},t.fillRow=function(e,t){if(t>=9)return!0;for(var n=this.matrix[t],i=this.orders[t],l=0;l<i.length;l++){var s=i[l];if(!n[s]&&o.Utils.matrix.fillable(this.matrix,t,s,e))return n[s]=e,!!this.fillRow(e,t+1)||(n[s]=0,!1)}return!1},e}();n.Generator=i,cc._RF.pop()},{"./Utils":"Utils"}],Number:[function(e,t){"use strict";cc._RF.push(t,"25749sa8zVF6450RyOm6QmT","Number"),cc.Class({extends:cc.Component,properties:{number:{type:cc.Button,default:null},_isMark:!1},onLoad:function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="Number",e.handler="onClickNumber",e.customEventData={number:(parseInt(this.node.name.substr(6))||0)+1},this.node.getComponent(cc.Button).clickEvents.push(e),this._isMark=!1,this._setColor(),globalEvent.on("MARK",this._onMarked,this)},onDestroy:function(){globalEvent.off("MARK",this._onMarked,this)},start:function(){},onClickNumber:function(e,t){globalEvent.emit("NUMBER_CLICKED",t)},_onMarked:function(){this._isMark=!this._isMark,this._setColor()},_setColor:function(){var e=this.number.node.getChildByName("Label");this._isMark?e.color=new cc.Color(187,187,187):e.color=new cc.Color(3,80,165)}}),cc._RF.pop()},{}],Result:[function(e,t){"use strict";cc._RF.push(t,"81744EvgppIQ44aO4TQ+tsp","Result"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.active=!1,globalEvent.on("NEW",this._onNewGame,this),globalEvent.on("GAME_FINISH",this._onGameFinish,this)},onDestroy:function(){globalEvent.off("NEW",this._onNewGame,this),globalEvent.off("GAME_FINISH",this._onGameFinish,this)},start:function(){},_onNewGame:function(){this.node.active=!1},_onGameFinish:function(){this.node.active=!0}}),cc._RF.pop()},{}],Sudoku:[function(e,t,n){"use strict";cc._RF.push(t,"d17a5GQekdMxIuMEonhXTON","Sudoku"),n.__esModule=!0,n.Sudoku=void 0;var o=e("./Generator"),i=e("./Utils"),l={easy:62,medium:53,hard:44,"very-hard":35,insane:26,inhuman:17},s={easy:1,medium:1,hard:2,"very-hard":2,insane:3,inhuman:3},r=function(){function e(){this.matrix=(new o.Generator).generate()}var t=e.prototype;return t.make=function(e){void 0===e&&(e="easy");var t=i.Utils.matrix.shuffle(Array.from({length:81},function(e,t){return t})).slice(0,l[e]);return this.puzzleMatrix=this.matrix.map(function(e,n){return e.map(function(e,o){var i=9*n+o;return-1!==t.indexOf(i)?e:0})}),this.hintNum=s[e],this.puzzleMatrix},t.check=function(e,t){var n=this,o=i.Utils.box.convertFromBoxIndex(e,t),l=o.rowIndex,s=o.colIndex,r=this.matrix[l][s]===this.puzzleMatrix[l][s];return r?{correct:r,finish:this.puzzleMatrix.every(function(e,t){return e.every(function(e,o){return e===n.matrix[t][o]})})}:{correct:r,finish:!1}},e}();n.Sudoku=r,cc._RF.pop()},{"./Generator":"Generator","./Utils":"Utils"}],Utils:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"6c2c8V5ep5DxL6LVeOGiati","Utils"),n.__esModule=!0,n.Utils=void 0;var i={make:function(e){var t=this;return void 0===e&&(e=0),Array.from({length:9}).map(function(){return t.makeRow(e)})},makeRow:function(e){return void 0===e&&(e=0),Array.from({length:9}).fill(e)},shuffle:function(e){for(var t=0;t<e.length-1;t++){var n=t+1+Math.floor(Math.random()*(e.length-1-t)),o=[e[n],e[t]];e[t]=o[0],e[n]=o[1]}return e},fillable:function(e,t,n,o){for(var i=l.convertToBoxIndex(t,n).boxIndex,s=l.getBoxCells(e,i),r=0;r<9;r++)if(e[t][r]===o||e[r][n]===o||s[r]===o)return!1;return!0}},l={convertToBoxIndex:function(e,t){return{boxIndex:3*Math.floor(e/3)+Math.floor(t/3),cellIndex:e%3*3+t%3}},convertFromBoxIndex:function(e,t){return{rowIndex:3*Math.floor(e/3)+Math.floor(t/3),colIndex:e%3*3+t%3}},getBoxCells:function(e,t){for(var n=[],o=this.convertFromBoxIndex(t,0),i=o.rowIndex,l=o.colIndex,s=0;s<9;s++){var r=i+Math.floor(s/3),a=l+s%3;n.push(e[r][a])}return n}},s=function(){function e(){}var t,n;return t=e,n=[{key:"matrix",get:function(){return i}},{key:"box",get:function(){return l}}],null&&o(t.prototype,null),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.Utils=s,cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"72ea1JdL0pEuq2DHzz+ENVQ","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["Board","Box","Cell","Generator","Sudoku","Utils","Diffculty","Function","Game","Number","Result","use_v2.0.x_cc.Toggle_event"]);